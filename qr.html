<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>패스오더 QR 페이지</title>
</head>

<body class="bg-white">
  <div id="app"></div>

  <script>
    const params = new URLSearchParams(location.search);
    const uid = params.get("uid") || "unknown";
    const variant = params.get("variant") || "A";

    const gasUrl =
      "https://script.google.com/macros/s/AKfycbw6NxWa7BXpWrvKPCaHXJsmAYsOZ6FfIFo0cXNd911AA-ZOJXUlvFf7avD9EvYMY2Mg/exec";
    const scanUrl = `${gasUrl}?uid=${uid}&variant=${variant}`;

    fetch(`./layouts/layout${variant}.html`)
      .then(res => res.text())
      .then(html => {
        html = html.replaceAll(
          "{{QR_SRC}}",
          `https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=${encodeURIComponent(
            scanUrl
          )}`
        );
        html = html.replaceAll("{{UID}}", uid);
        html = html.replaceAll("{{VARIANT}}", variant);

        document.getElementById("app").innerHTML = html;
      });
  </script>
</body>
</html>
