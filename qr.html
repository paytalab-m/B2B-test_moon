<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>패스오더 QR 페이지</title>
</head>

<body class="bg-white">
  <div id="app"></div>

  <script>
    const params = new URLSearchParams(location.search);
    const uid = params.get("uid") || "unknown";
    const variant = params.get("variant") || "A";

    // ▼▼▼ [수정됨] 구글 주소가 아니라, 사장님께 보여줄 GitHub 페이지 주소로 변경 ▼▼▼
    // (이렇게 해야 QR 찍었을 때 상단 배너가 안 뜹니다)
    const targetUrl = "https://paytalab-m.github.io/B2B-test_moon/survey.html";
    
    // URL 생성 (Github 주소로 파라미터 전달)
    const scanUrl = `${targetUrl}?uid=${uid}&variant=${variant}`;

    fetch(`./layouts/layout${variant}.html`)
      .then(res => res.text())
      .then(html => {
        html = html.replaceAll(
          "{{QR_SRC}}",
          `https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=${encodeURIComponent(
            scanUrl
          )}`
        );
        html = html.replaceAll("{{UID}}", uid);
        html = html.replaceAll("{{VARIANT}}", variant);

        document.getElementById("app").innerHTML = html;
      });
  </script>
</body>
</html>
